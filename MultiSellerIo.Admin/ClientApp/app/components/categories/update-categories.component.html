<form #updateCategoryForm="ngForm">
    <div class="form-group">
        <label for="parentCategoryId">Parent Category</label>
        <select [(ngModel)]="category.parentCategoryId" name="parentCategoryId" #parentCategoryId="ngModel" class="form-control">
            <option value="0">No parent category</option>
            <option *ngFor="let parentCategory of parentCategories" [ngValue]="parentCategory.id">{{parentCategory.name}}</option>
        </select>
    </div>
    <div class="form-group">
        <label for="categoryName">Name</label>
        <input type="text" class="form-control" name="categoryName" [(ngModel)]="category.name" required #categoryName="ngModel">
        <small *ngIf="!categoryName.valid && updateCategoryForm._submitted" class="form-validation-error">Name is required</small>
    </div>
    <div class="form-group">
        <label for="description">Description</label>
        <textarea class="form-control" name="description" [(ngModel)]="category.description" #description="ngModel"></textarea>
    </div>
    <div class="form-group">
        <label for="slug">Slug</label>
        <textarea class="form-control" name="slug" [(ngModel)]="category.slug" #slug="ngModel"></textarea>
    </div>
    <h4>Category attributes</h4><hr />
    <div *ngFor="let categoryAttribute of category.categoryAttributes; let i=index">
        <div class="row">
            <div class="form-group col-sm-3">
                <label>Product Attribute</label>
                <select [(ngModel)]="category.categoryAttributes[i].productAttributeId" class="form-control" name="productAttributeId{{i}}" #productAttributeId="ngModel">
                    <option *ngFor="let productAttribute of attributes" [ngValue]="productAttribute.id">{{productAttribute.name}}</option>
                </select>
            </div>
            <div class="form-group col-sm-3">
                <label>Is Required</label>
                <input type="checkbox" [ngModel]="category.categoryAttributes[i].isRequired" name="isRequired{{i}}" #isRequired="ngModel"
                       (change)="category.categoryAttributes[i].isRequired=!category.categoryAttributes[i].isRequired">
            </div>
            <div class="form-group col-sm-3">
                <label>Is Group</label>
                <input type="checkbox" [ngModel]="category.categoryAttributes[i].isGroup" name="isGroup{{i}}" #isGroup="ngModel"
                       (change)="category.categoryAttributes[i].isGroup=!category.categoryAttributes[i].isGroup">
            </div>
            <div class="form-group col-sm-3">
                <button (click)="removeCategoryAttribute(i)" type="button" class="btn btn-danger btn-sm">Remove</button>
            </div>
           
        </div>
    </div>
    <div class="row text-center">
        <button type="button" class="btn" (click)="addCategoryAttribute()">Add Category Attribue</button>
    </div>
    <button type="submit" class="btn btn-primary" (click)="updateCategory()">SAVE</button>
    <a [routerLink]="['/categories']" class="btn btn-primary">CANCEL</a>
</form>